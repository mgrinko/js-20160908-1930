<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Test</title>
  <style>
    .js-closed ul {
      display: none;
    }
  </style>
</head>
<body>

<div id="container1"></div>
<div id="container2"></div>
<div id="container3"></div>

<script>
  var data = {
    "Рыбы": {
      "Форель": {},
      "Щука": {}
    },

    "Деревья": {
      "Хвойные": {
        "Лиственница": {},
        "Ель": {}
      },
      "Цветковые": {
        "Берёза": {},
        "Тополь": {}
      }

    }
  };

  class Tree {
    constructor(options) {
      this._el = options.element;
      this._data = options.data;

      this._el.innerHTML = this._createTreeHTML(this._data);
      this._el.classList.add('tree');

      this._el.addEventListener('click', this._onBranchTitleClick.bind(this));
    }

    open() {

    }

    close() {

    }

    _onBranchTitleClick(event) {
      var title = event.target.closest('.title');

      if (!title) {
        return;
      }

      if (title.closest('li') !== event.currentTarget) {
        return;
      }

      event.currentTarget.classList.toggle('js-closed');
    }

    _createTreeHTML(obj) {
      if (this._isObjectEmpty(obj)) {
        return '';
      }

      var html = `<ul class="tree__branch-content">`;

      for (var key in obj) {
        html += `
          <li class="tree__branch">
            <span class="tree__branch-title">${key}</span>
            ${this._createTreeHTML(obj[key])}
          </li>
        `;
      }

      html += `</ul>`;

      return html;
    }

    _isObjectEmpty(obj) {
      for (var key in obj) {
        return false;
      }

      return true;
    }
  }

  new Tree({
    element: document.getElementById('container1'),
    data: data
  });


</script>

</body>
</html>